{"version":3,"sources":["lora/MacCommands.ts","components/help/HelpTooltip.tsx","components/input/helpers.tsx","components/input/NumberInput.tsx","components/input/UserConfig.ts","components/input/UserInput.tsx","lora/Airtime.ts","components/result/Result.tsx","components/result/Results.tsx","components/scroll/HorizontalScroll.tsx","components/calculator/Router.ts","components/calculator/Calculator.tsx","serviceWorker.ts","index.tsx","App.tsx"],"names":["UplinkMacCommands102","name","size","DownlinkMacCommands102","HelpTooltip","_ref","text","_ref$placement","placement","react_default","a","createElement","OverlayTrigger_default","overlay","Tooltip_default","id","style","textAlign","react_markdown_default","source","className","withFormControl","state","value","onChange","event","target","currentTarget","setValue","NumberInput","_ref$min","min","useEffect","InputGroup_default","Prepend","Button_default","onClick","variant","FormControl_default","Object","assign","type","placeholder","aria-label","Append","v","defaults","payloadSize","headerSize","codingRate","UserInput","props","useParam","defaultValue","_useState","useState","_useState2","slicedToArray","params","arguments","length","undefined","result","values","split","map","trim","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","test","console","warn","concat","substr","join","lowerCase","toLowerCase","mac","find","cmd","macCommands","_iterator","Symbol","iterator","next","done","err","return","objectSpread","decodeUserConfig","userConfig","addMacCommand","setPacketSize","setCodingRate","setUserConfig","parts","push","replace","apply","toConsumableArray","encodeUserConfig","macCommandButtons","idx","key","Badge_default","pill","includes","Fragment","Form_default","Row","Group","as","Col","controlId","Label","Control","Col_default","md","ButtonToolbar_default","Airtime","sf","bw","lowDrOptimize","explicitHeader","preambleLength","tSym","Math","pow","tPreamble","h","de","cr","max","ceil","toFixed","Result","dr","airtime","Card_default","Header","Title","notes","Subtitle","Footer","floor","Results","region","packetSize","results","dataRates","calculate","Table_default","HorizontalScroll","children","scrollContainer","useRef","hasOverflowLeft","setHasOverflowLeft","_useState3","_useState4","hasOverflowRight","setHasOverflowRight","_useState5","_useState6","overflowLeft","_useState7","_useState8","overflowRight","_useState9","width","height","_useState10","resize","setResize","scroll","current","log","handleScroll","offsetWidth","scrollWidth","scrollLeft","window","addEventListener","removeEventListener","scrollBy","ref","esm","handleWidth","handleHeight","onResize","parseUrl","history","location","config","_location$pathname$sp","pathname","_location$pathname$sp2","networkName","regionName","parameters","network","networks","regions","Calculator","changeUrl","url","bind","_parseUrl","n","r","defaultRegion","Row_default","HorizontalScroll_HorizontalScroll","ButtonGroup_default","active","disabled","label","lg","title","description","Boolean","hostname","match","ReactDOM","render","configUrl","process","progress","setProgress","setConfig","didCancel","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","axios","get","sent","data","t0","stop","this","fetchConfig","react_router_dom","basename","Container_default","react_router","GithubCorner_default","href","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.c32b2b4e.chunk.js","sourcesContent":["export type MacCommand = {\n  name: string;\n  /**\n   * The command's payload size, excluding the byte for the MAC command itself.\n   */\n  size: number;\n}\n\n/**\n * The LoRaWAN 1.0.2 MAC commands and their payload sizes, if any (excluding the\n * one byte for the MAC command itself). Some commands can be present in the\n * very same LoRaWAN packet multiple times.\n */\nexport const UplinkMacCommands102: MacCommand[] = [\n  {name: 'LinkCheckReq', size: 0},\n  {name: 'LinkAdrAns', size: 1},\n  {name: 'DutyCycleAns', size: 0},\n  {name: 'RXParamSetupAns', size: 1},\n  {name: 'DevStatusAns', size: 2},\n  {name: 'NewChannelAns', size: 1},\n  {name: 'DlChannelAns', size: 1},\n  {name: 'RXTimingSetupAns', size: 0},\n  {name: 'TxParamSetupAns', size: 0}\n];\n\nexport const DownlinkMacCommands102: MacCommand[] = [\n  {name: 'LinkCheckAns', size: 2},\n  {name: 'LinkAdrReq', size: 4},\n  {name: 'DutyCycleReq', size: 1},\n  {name: 'RXParamSetupReq', size: 4},\n  {name: 'DevStatusReq', size: 0},\n  {name: 'NewChannelReq', size: 5},\n  {name: 'DlChannelReq', size: 4},\n  {name: 'RXTimingSetupReq', size: 1},\n  {name: 'TxParamSetupReq', size: 1},\n];\n","import React from 'react';\nimport { Placement } from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport ReactMarkdown from 'react-markdown';\n\ntype HelpTooltipProps = {\n  text?: string;\n  placement?: Placement;\n}\n\n/**\n * Shows an information icon for a tooltip, if the optional help text is set.\n */\nexport default function HelpTooltip({text, placement = \"bottom\"}: HelpTooltipProps) {\n  if (!text) {\n    return null;\n  }\n\n  return (\n    <sup>\n      <OverlayTrigger placement={placement} overlay={\n        <Tooltip id=\"dummy\">\n          <div style={{textAlign: \"left\"}}>\n          <ReactMarkdown source={text} />\n          </div>\n        </Tooltip>\n      }>\n        <small className=\"text-muted\">&#9432;</small>\n      </OverlayTrigger>\n    </sup>\n  );\n}\n","import React, { Dispatch, SetStateAction } from 'react';\n\n/**\n * Returns an object that can be spread for use in Bootstrap forms, like `<FormControl {...withFormControl(state)}/>`.\n */\nexport function withFormControl<T>(state: { value: T, setValue: Dispatch<SetStateAction<T>> }) {\n\n  // See https://github.com/react-bootstrap/react-bootstrap/issues/2781\n  function onChange(event: React.FormEvent<any>) {\n    // function onChange(event: React.FormEventHandler) {\n    const target = event.currentTarget;\n    state.setValue(typeof state.value === 'number' ? +target.value as any : target.value);\n  }\n\n  // FormControl expects a string for value\n  return {value: '' + state.value, onChange};\n}\n","import React, { Dispatch, SetStateAction, useEffect, useState } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport FormControl from 'react-bootstrap/FormControl';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport { withFormControl } from './helpers';\n\ntype NumberInputProps = {\n  min?: number;\n  value: number;\n  setValue: Dispatch<SetStateAction<number>>;\n};\n\n/**\n * A Bootstrap form input field with decrement and increment buttons.\n */\nexport default function NumberInput({min = 0, value, setValue}: NumberInputProps) {\n\n  function useParam<T>(defaultValue: T) {\n    const [value, setValue] = useState(defaultValue);\n    return {value, setValue};\n  }\n\n  function dec() {\n    if (value > min) {\n      setValue(value - 1);\n    }\n  }\n\n  function inc() {\n    setValue(v => v + 1);\n  }\n\n  useEffect(() => {\n    setValue(value);\n  }, [value]);\n\n  return (\n    <InputGroup className=\"mb-3\">\n      <InputGroup.Prepend>\n        <Button onClick={dec} variant=\"outline-secondary\">-</Button>\n      </InputGroup.Prepend>\n      <FormControl {...withFormControl({value, setValue})} type=\"number\" min={min} placeholder=\"Enter number\"\n                   aria-label=\"Number\" />\n      <InputGroup.Append>\n        <Button onClick={inc} variant=\"outline-secondary\">+</Button>\n      </InputGroup.Append>\n    </InputGroup>\n  );\n}\n","import { CodingRate } from '../../lora/Airtime';\nimport { DownlinkMacCommands102, MacCommand, UplinkMacCommands102 } from '../../lora/MacCommands';\n\ntype UserConfig = {\n  macCommands?: MacCommand[];\n} & typeof defaults;\n\nexport const defaults = {\n  payloadSize: 6,\n  headerSize: 13,\n  codingRate: '4/5' as CodingRate\n};\n\n/**\n * Takes the first integer argument to be the application payload size, the second as the LoRaWAN header size,\n * a single string starting with \"cr\" as the coding rate, and all other values as possible MAC commands.\n */\nexport function decodeUserConfig(params: string = ''): UserConfig {\n  const result: UserConfig = {} as any;\n  const values = params.split(',').map(v => v.trim());\n  for (let value of values) {\n    if (value === '') {\n      continue;\n    }\n\n    if (/^\\d+$/.test(value)) {\n      // The first integer denotes the payload size, the second the header size\n      if (!result.payloadSize) {\n        result.payloadSize = +value;\n      } else if (!result.headerSize) {\n        result.headerSize = +value;\n      } else {\n        console.warn(`Ignored numeric value ${value}; already parsed both payloadSize and headerSize`);\n      }\n      continue;\n    }\n\n    if (/^cr4[5678]$/i.test(value)) {\n      if (!result.codingRate) {\n        result.codingRate = (value.substr(2).split('').join('/') as CodingRate);\n      } else {\n        console.warn(`Ignored string value ${value}; already parsed codingRate`);\n      }\n      continue;\n    }\n\n    // Case-insensitive search in both the uplink and downlink MAC commands\n    const lowerCase = value.toLowerCase();\n    const mac = UplinkMacCommands102.concat(DownlinkMacCommands102)\n      .find(cmd => cmd.name.toLowerCase() === lowerCase);\n    if (mac) {\n      result.macCommands = (result.macCommands || []).concat(mac);\n    } else {\n      console.warn(`Ignored string value ${value}; no matching MAC command found`);\n    }\n  }\n\n  return {...defaults, ...result};\n}\n\n/**\n * Encodes the user inputs for use in an URL segment.\n */\nexport function encodeUserConfig(payloadSize: number, headerSize: number, codingRate?: CodingRate, macCommands?: MacCommand[]) {\n  const parts: (string | number)[] = [];\n  if (payloadSize !== defaults.payloadSize || headerSize !== defaults.headerSize) {\n    parts.push(payloadSize);\n  }\n  if (headerSize !== defaults.headerSize) {\n    parts.push(headerSize);\n  }\n  if (codingRate && codingRate !== defaults.codingRate) {\n    parts.push('cr' + codingRate.replace('/', ''));\n  }\n  if (macCommands) {\n    parts.push(...macCommands.map(cmd => cmd.name));\n  }\n  return parts.join(',');\n}\n","import React, { useEffect, useState } from 'react';\nimport Badge from 'react-bootstrap/Badge';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport { CodingRate } from '../../lora/Airtime';\nimport { MacCommand, UplinkMacCommands102 } from '../../lora/MacCommands';\nimport HelpTooltip from '../help/HelpTooltip';\nimport { withFormControl } from './helpers';\nimport NumberInput from './NumberInput';\nimport { decodeUserConfig, encodeUserConfig } from './UserConfig';\n\n/**\n * The components determines its parameters given its URL fragment, and only tells the parent component about the total\n * packet size and the coding rate.\n */\ntype UserConfigProps = {\n  userConfig?: string;\n  setPacketSize: (size: number) => void;\n  setCodingRate: (cr: CodingRate) => void;\n  setUserConfig: (fragment: string) => void;\n};\n\n\n/**\n * Form using some controlled components to input the packet's details.\n *\n * TODO The state is maintained by the parent component.\n *\n * This reports the total LoRa packet size, the coding rate and its own fragment in the URL to its parent.\n *\n * /ttn/eu868/1.0.x,4/5,15,LinkCheckReq,LinkAdrAns,DutyCycleAns,RXParamSetupAns,DevStatusAns,NewChannelAns,RXTimingSetupAns,TxParamSetupAns,DlChannelAns\n *\n *\n */\nexport default function UserInput(props: UserConfigProps) {\n\n  function useParam<T>(defaultValue: T) {\n    const [value, setValue] = useState(defaultValue);\n    return {value, setValue};\n  }\n\n  const params = decodeUserConfig(props.userConfig);\n  const payloadSize = useParam(params.payloadSize);\n  const headerSize = useParam(params.headerSize);\n  const codingRate = useParam(params.codingRate);\n  const macCommands = useParam(params.macCommands);\n\n  function increaseHeaderSize(size: number) {\n    headerSize.setValue(v => v + size);\n    // Same result:\n    // headerSize.setValue(headerSize.value + size);\n  }\n\n  function addMacCommand(cmd: MacCommand) {\n    macCommands.setValue((macCommands.value || []).concat(cmd));\n    increaseHeaderSize(cmd.size + 1);\n  }\n\n  useEffect(() => {\n    props.setPacketSize(headerSize.value + payloadSize.value);\n  }, [headerSize, payloadSize]);\n\n  useEffect(() => {\n    props.setCodingRate(codingRate.value);\n  }, [codingRate]);\n\n  /**\n   * Tells the parent that the user's configuration has changed, to keep the URL synchronized with the current inputs.\n   *\n   * Rather than this callback, we could use a Route in the parent component and manage our own URL segment here.\n   * However, by design, when the user configuration only uses default values then that segment would not exist. And as\n   * the routing does not provide an API to only change a specific URL segment, this component would need to know about\n   * the URL segments of its parent to reliably change its own segment. (Like to detect excessive slashes and avoid\n   * endless loops.) Instead, the URL segment is passed to this component, and this component notifies the parent about\n   * changes. The parent needs to know about this segment anyhow, like when the parent component changes the region for\n   * which the user configuration should be preserved.\n   */\n  useEffect(() => {\n    props.setUserConfig(encodeUserConfig(payloadSize.value, headerSize.value, codingRate.value, macCommands.value));\n  }, [headerSize, payloadSize, codingRate]);\n\n  const macCommandButtons = UplinkMacCommands102.map((cmd, idx) => (\n    <div key={idx}>\n      <Badge onClick={() => addMacCommand(cmd)}\n             pill\n             variant={params.macCommands && params.macCommands.includes(cmd) ? 'primary' : 'secondary'}>{cmd.name} {cmd.size}</Badge>\n      &nbsp;\n    </div>\n  ));\n\n  return (\n    <>\n      <Form>\n        <Form.Row>\n          <Form.Group as={Col} controlId=\"formHeaderSize\">\n            <Form.Label>\n              Header size\n              {/*TODO For proper accessibility this should be outside the <label>*/}\n              <HelpTooltip\n                text={\"In a LoRaWAN 1.0.x uplink and downlink, the header is at least 13 bytes:\\n\\n- MType (1 byte)\\n- DevAddr (4)\\n- FCtrl (1)\\n- FCnt (2)\\n- FPort (1)\\n- MIC (4)\"} />\n            </Form.Label>\n            <NumberInput {...headerSize} min={13} />\n          </Form.Group>\n\n          <Form.Group as={Col} controlId=\"formApplicationPayloadSize\">\n            <Form.Label>\n              Payload size\n              <HelpTooltip\n                text=\"The application payload size. Might be empty for a simple ACK or if the packet only includes MAC commands.\" />\n            </Form.Label>\n            <NumberInput {...payloadSize} />\n          </Form.Group>\n\n          <Form.Group as={Col} controlId=\"formCodingRate\">\n            <Form.Label>\n              Coding rate\n              <HelpTooltip text=\"The coding rate (CR) used for forward error correction (FEC).\" />\n            </Form.Label>\n            <Form.Control as=\"select\" {...withFormControl(codingRate)} className=\"xxtext-primary xxborder-primary\">\n              <option value=\"4/5\">4/5</option>\n              <option value=\"4/6\">4/6</option>\n              <option value=\"4/7\">4/7</option>\n              <option value=\"4/8\">4/8</option>\n            </Form.Control>\n          </Form.Group>\n        </Form.Row>\n\n        {/* TODO Work in progress: somehow allow for adding/removing MAC commands; for now only when already in URL. */}\n        {params.macCommands && (\n          <>\n            <Form.Row className=\"justify-content-md-center\">\n              <Col md=\"8\">\n                <Form.Label>MAC command</Form.Label>\n                <ButtonToolbar aria-label=\"MAC commands\">{macCommandButtons}</ButtonToolbar>\n              </Col>\n            </Form.Row>\n            <br />\n          </>\n        )}\n      </Form>\n    </>\n  );\n}\n","export type CodingRate = '4/5' | '4/6' | '4/7' | '4/8';\n\nexport default class Airtime {\n  /**\n   * Calculates the LoRa airtime in microseconds.\n   *\n   * See https://www.semtech.com/uploads/documents/LoraDesignGuide_STD.pdf#page=7\n   *\n   * Spreading factor and bandwidth together define the data rate.\n   *\n   * @param size full packet size\n   * @param sf spreading factor, 6..12 (6 is not used in LoRaWAN)\n   * @param bw bandwidth in kHz, typically 125, sometimes 250 or 500\n   * @param codingRate coding rate, '4/5', '4/6', '4/7' or '4/8'\n   * @param lowDrOptimize low data rate optimization, 'auto', true or false\n   * @param explicitHeader true for LoRaWAN: this is the low-level header that\n   *        indicates coding rate, payload length and payload CRC presence. In\n   *        plain LoRa it can be left out if both sides have these parameters\n   *        fixed.\n   * @param preambleLength\n   */\n  static calculate(size: number, sf: number, bw = 125, codingRate: CodingRate = '4/5',\n                   lowDrOptimize: 'auto' | true | false = 'auto', explicitHeader = true, preambleLength = 8) {\n\n    // time in milliseconds\n    const tSym = Math.pow(2, sf) / (bw * 1000) * 1000;\n    const tPreamble = (preambleLength + 4.25) * tSym;\n\n    // H = 0 when the header is enabled, H = 1 when no header is present.\n    const h = explicitHeader ? 0 : 1;\n    // DE = 1 when the low data rate optimization is enabled, DE = 0 for disabled.\n    // When 'auto' then only for SF11 and SF12, on 125kHz\n    const de = ((lowDrOptimize === 'auto' && +bw === 125 && +sf >= 11) || lowDrOptimize === true) ? 1 : 0;\n    // CR is the coding rate from 1 to 4\n    const cr = +codingRate[2] - 4;\n    const payloadSymbNb = 8 + Math.max(Math.ceil(\n      (8 * size - 4 * sf + 28 + 16 - 20 * h) / (4 * (sf - 2 * de))) * (cr + 4), 0);\n    const tPayload = payloadSymbNb * tSym;\n\n    return +(tPreamble + tPayload).toFixed(2);\n  }\n}\n","import React from 'react';\nimport Card from 'react-bootstrap/Card';\nimport { DataRate } from '../../AppConfig';\nimport HelpTooltip from '../help/HelpTooltip';\n\ntype ResultCardProps = {\n  dr: DataRate;\n  airtime: number;\n}\n\n/**\n * A single result, showing the data rate (SF, bandwidth), time on air and calculated limits.\n */\nexport function Result({dr, airtime}: ResultCardProps) {\n  return (\n    <Card>\n      <Card.Header>\n        <Card.Title>\n          {dr.name}\n          <HelpTooltip text={dr.notes} placement=\"top\" />\n        </Card.Title>\n        <Card.Subtitle as=\"h4\">\n          {/* SF{dr.sf} yields a newline between SF and the value */}\n          <span className=\"sf\">{'SF' + dr.sf}</span>\n          <span className=\"bw\">BW<br />{dr.bw}</span>\n        </Card.Subtitle>\n      </Card.Header>\n\n      <Card.Title as=\"h4\">\n        {airtime}<span className=\"Result-unit\">ms</span>\n      </Card.Title>\n      <Card.Footer>\n        <div>\n          {Math.floor(30000 / airtime)}<span className=\"Result-unit\">/24h</span>\n        </div>\n        <div>\n          {(30000 / 24 / airtime).toFixed(1)}<span className=\"Result-unit\">avg<br />/hour</span>\n        </div>\n      </Card.Footer>\n    </Card>\n  );\n}\n","import React from 'react';\nimport Table from 'react-bootstrap/Table';\nimport { Region } from '../../AppConfig';\nimport Airtime, { CodingRate } from '../../lora/Airtime';\nimport HorizontalScroll from '../scroll/HorizontalScroll';\nimport { Result } from './Result';\n\ntype ResultsProps = {\n  region: Region;\n  packetSize: number;\n  codingRate: CodingRate;\n};\n\n/**\n * Shows the results of the airtime calculations.\n */\nexport default function Results({region, packetSize, codingRate}: ResultsProps) {\n\n  if (!codingRate) {\n    return null;\n  }\n\n  const results = region.dataRates.map((dr) => {\n    const airtime = Airtime.calculate(packetSize, dr.sf, dr.bw, codingRate);\n    return (\n      <td key={dr.name}>\n        <Result dr={dr} airtime={airtime} />\n      </td>\n    );\n  });\n\n  {/*<Table responsive>*/}\n  return (\n      <Table>\n        <tbody>\n        <tr>\n          {results}\n        </tr>\n        </tbody>\n      </Table>\n  );\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport ReactResizeDetector from 'react-resize-detector';\nimport './HorizontalScroll.scss';\n\ntype HorizontalScrollProps = {\n  children: React.ReactNode;\n};\n\n/**\n * Wraps the children in a container that detects scroll overflow.\n */\n// TODO Or create a withScrollContainer method?\nexport default function HorizontalScroll({children}: HorizontalScrollProps) {\n  const scrollContainer = useRef<HTMLDivElement>(null);\n  // const scrollContainer = useRef<RefObject<Table>>(null);\n\n  // TODO debounce?\n\n  // TODO test tooltip!\n\n  const [hasOverflowLeft, setHasOverflowLeft] = useState(false);\n  const [hasOverflowRight, setHasOverflowRight] = useState(false);\n  const [overflowLeft, setOverflowLeft] = useState('');\n  const [overflowRight, setOverflowRight] = useState('');\n  const [resize, setResize] = useState({width: -1, height: -1});\n\n  const handleResize = (width: number, height: number) => {\n    console.log('resize');\n    setResize({width, height});\n  };\n\n\n  // let className = 'overflow-indicator';\n  let className = '';\n\n  const scrollLeft = () => {\n    const scroll = scrollContainer.current;\n    if (scroll) {\n      scroll.scrollBy(-20, 0);\n    }\n  };\n\n  const scrollRight = () => {\n    const scroll = scrollContainer.current;\n    if (scroll) {\n      scroll.scrollBy(20, 0);\n    }\n  };\n\n  useEffect(() => {\n    const elem = scrollContainer.current;\n    // Get the child that is the <div> rendered by <Table responsive>\n    // TODO add support for responsive=\"sm\" and all? See https://react-bootstrap.netlify.com/components/table/\n    // TODO trigger also on URL change (like IN865 -> EU868)\n    // const scroll = elem ? elem.getElementsByClassName('table-responsive')[0] as HTMLDivElement : null;\n    const scroll = elem as HTMLDivElement;\n    console.log('scroll', scroll);\n\n    const handleScroll = () => {\n      if (!scroll) {\n        console.log('No scroll element');\n      } else {\n        console.log(scroll);\n        // console.log(scroll.offsetHeight, scroll.scrollHeight, scroll.scrollTop, scroll.offsetWidth,\n        // scroll.scrollWidth, scroll.scrollLeft);\n        console.log(scroll.offsetWidth, scroll.scrollWidth, scroll.scrollLeft, scroll.scrollWidth - scroll.offsetWidth);\n        const hasOverflowLeft = scroll.scrollLeft > 0;\n        // Allow for 1 pixel of rounding errors\n        const hasOverflowRight = (scroll.scrollWidth - scroll.offsetWidth) > scroll.scrollLeft + 1;\n        console.log('<< hasOverflowLeft', hasOverflowLeft);\n        console.log('hasOverflowRight >>', hasOverflowRight);\n        // setOverflowLeft(hasOverflowLeft ? ' horizontal-scroll--overflow horizontal-scroll__scroll-left--overflow-left' : '');\n        // setOverflowRight(hasOverflowRight ? ' horizontal-scroll--overflow horizontal-scroll__scroll-right--overflow-right' : '');\n        // className += hasOverflowLeft ? ' xxoverflow-left' : '';\n        // className += hasOverflowRight ? ' xxoverflow-right' : '';\n\n        setHasOverflowLeft(hasOverflowLeft);\n        setHasOverflowRight(hasOverflowRight);\n      }\n    };\n\n    if (scroll) {\n      handleScroll();\n      console.log('Registering onScroll');\n      window.addEventListener('resize', handleScroll);\n      scroll.addEventListener('scroll', handleScroll);\n      return () => {\n        console.log('Removing onScroll');\n        scroll.removeEventListener('scroll', handleScroll);\n        window.removeEventListener('resize', handleScroll);\n      };\n    }\n  }, [resize]);\n  // TODO if the Results width changes for other parameters too, then add those as well\n\n  return (\n    <div className={'d-flex justify-content-center align-items-center horizontal-scroll '\n    + (hasOverflowLeft  ? ' horizontal-scroll--overflow-left' : '')\n    + (hasOverflowRight ? ' horizontal-scroll--overflow-right' : '')\n    }>\n      <div className={'horizontal-scroll__button ' + (hasOverflowLeft ? ' horizontal-scroll__button--enabled' : '')} onClick={scrollLeft}>\n        &lsaquo;\n      </div>\n      <div className={'horizontal-scroll__content table-responsive ' + className + overflowLeft + overflowRight} ref={scrollContainer}>\n        {children}\n        <ReactResizeDetector handleWidth handleHeight onResize={handleResize} />\n      </div>\n      <div className={'horizontal-scroll__button ' + (hasOverflowRight ? ' horizontal-scroll__button--enabled' : '')} onClick={scrollRight}>\n        &rsaquo;\n      </div>\n    </div>\n  );\n\n}\n","import { History, Location } from 'history';\nimport { AppConfig, Network, Region } from '../../AppConfig';\n\n/**\n * Custom URL handling:\n *\n * - Updated URL for almost each change in the user input\n * - URL does not include default values, and no trailing slash if all parameters are defaults\n * - Changing the network or region only replaces part of the URL, without wiping the trailing parameters\n */\n\nexport function parseUrl(history: History, location: Location, config: AppConfig): { network: Network | undefined, region: Region | undefined, parameters: string | undefined } {\n  // Due to using `<Router basename={process.env.PUBLIC_URL}>`, even when deployed in a subfolder,\n  // location.pathname will only include a leading slash followed by our application's URL segments.\n  // So, no need to strip process.env.PUBLIC_URL here.\n  const [, networkName, regionName, parameters] = location.pathname.split('/');\n  const network = config.networks.find(network => network.name === networkName);\n  const region = network ? network.regions.find(region => region.name === regionName) : undefined;\n  return {network, region, parameters};\n}\n\nexport function setUrl(history: History, location: Location, config: AppConfig, network: Network, region: Region, parameters?: string) {\n  const current = parseUrl(history, location, config);\n  // current.parameters might be undefined as well\n  const params = parameters === undefined ? current.parameters : parameters;\n  const url = '/' + network.name + '/' + region.name + (params ? '/' + params : '');\n  if (location.pathname === url) {\n    console.log(`No URL change needed; ${url}`);\n    return;\n  }\n  // Due to using `<Router basename={process.env.PUBLIC_URL}>` this adds the process.env.PUBLIC_URL prefix\n  history.replace(url);\n}\n","import React, { useState } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ReactMarkdown from 'react-markdown';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { AppConfig, Region } from '../../AppConfig';\nimport { CodingRate } from '../../lora/Airtime';\nimport UserInput from '../input/UserInput';\nimport Results from '../result/Results';\nimport HorizontalScroll from '../scroll/HorizontalScroll';\nimport { parseUrl, setUrl } from './Router';\n\ntype CalculatorProps = {\n  config: AppConfig;\n} & RouteComponentProps;\n\n/**\n * The user inputs and the calculated results.\n *\n * Most state is also kept in the URL, as we want that to be copy-paste ready.\n */\nexport default function Calculator(props: CalculatorProps) {\n\n  const changeUrl = setUrl.bind(null, props.history, props.location, props.config);\n  const {network, region, parameters} = parseUrl(props.history, props.location, props.config);\n\n  if (!network) {\n    const n = props.config.networks[0];\n    const r = n.regions.find(r => r.name === n.defaultRegion) as Region;\n    changeUrl(n, r);\n    return null;\n  }\n\n  if (!region) {\n    const r = network.regions.find(r => r.name === network.defaultRegion) as Region;\n    changeUrl(network, r);\n    return null;\n  }\n\n  // The real defaults are set in the UserInput component, and posted back using callbacks\n  const [packetSize, setPacketSize] = useState<number>(null as any);\n  const [codingRate, setCodingRate] = useState<CodingRate>(null as any);\n\n  const handlePacketSizeChange = (size: number) => {\n    console.log('packet size', packetSize, size);\n    setPacketSize(size);\n  };\n\n  const handleCodingRateChange = (cr: CodingRate) => {\n    console.log('coding rate', codingRate, cr);\n    setCodingRate(cr);\n  };\n\n  /**\n   * Saves the updated user configuration in the current URL.\n   */\n  const handleParametersChange = (parameters: string) => {\n    console.log('URL', parameters);\n    changeUrl(network, region, parameters);\n  };\n\n  const setRegion = (region: Region) => {\n    console.log('region', region);\n    changeUrl(network, region);\n  };\n\n  return (\n    <>\n      <Row className=\"xxxtable-responsive\">\n        <Col>\n          <HorizontalScroll>\n            <ButtonGroup>\n              {network.regions.map((r) =>\n                <Button variant=\"outline-primary\" size=\"sm\" active={r.name === region.name} disabled={!r.dataRates}\n                        key={r.name} onClick={() => setRegion(r)}>{r.label}</Button>\n              )}\n            </ButtonGroup>\n          </HorizontalScroll>\n        </Col>\n      </Row>\n\n      <Row>\n        <hr />\n      </Row>\n\n      <Row className=\"justify-content-md-center\">\n        <Col md=\"auto\">\n          <UserInput userConfig={parameters} setUserConfig={handleParametersChange}\n                     setPacketSize={handlePacketSizeChange} setCodingRate={handleCodingRateChange}\n          />\n        </Col>\n      </Row>\n\n      <Row className=\"justify-content-md-center\">\n        <Col lg=\"8\">\n          <h2>{network.title} {region.label}</h2>\n        </Col>\n      </Row>\n\n      <Row>\n        <Col className=\"xxtable-responsive\">\n          <HorizontalScroll>\n            <Results region={region} packetSize={packetSize} codingRate={codingRate} />\n          </HorizontalScroll>\n        </Col>\n      </Row>\n\n      {region.description && (\n        <Row className=\"justify-content-md-center\">\n          <Col lg=\"8\">\n            <ReactMarkdown source={region.description} />\n          </Col>\n        </Row>\n      )}\n\n    </>\n  );\n\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.scss';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport Col from 'react-bootstrap/Col';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport GithubCorner from 'react-github-corner';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport './App.scss';\nimport { AppConfig } from './AppConfig';\nimport Calculator from './components/calculator/Calculator';\n\n/**\n * Loads the JSON configuration file and renders the application.\n */\nexport default function App() {\n  const configUrl = process.env.PUBLIC_URL + '/config.json';\n  const [progress, setProgress] = useState<string | null>('Loading configuration...');\n  const [config, setConfig] = useState({} as AppConfig);\n\n  // Given the empty array for deps, this only runs once, when component mounts;\n  // https://reactjs.org/docs/hooks-reference.html#conditionally-firing-an-effect\n  useEffect(() => {\n    let didCancel = false;\n    const fetchConfig = async () => {\n      try {\n        // By default, axios expects JSON in UTF8, and converts that on the fly\n        const result = (await axios.get<AppConfig>(configUrl)).data;\n        if (!didCancel) {\n          setProgress(null);\n          setConfig(result);\n        }\n      } catch (error) {\n        // TODO fine for 404, but this does not catch JSON parse errors?\n        setProgress(`Failed to load configuration ${process.env.PUBLIC_URL} ${configUrl}: ${error}`);\n      }\n    };\n\n    // Workaround to suppress the following React warning:\n    //   Warning: useEffect function must return a cleanup function or nothing.\n    //   Promises and useEffect(async () => ...) are not supported, but you can\n    //   call an async function inside an effect.\n    // This will still make the compiler warn about ignoring the returned Promise.\n    fetchConfig();\n    return () => {\n      didCancel = true;\n    };\n  }, []);\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <Container className=\"App\">\n        <Row>\n          <Col>\n            <h1>LoRaWAN 1.0.x airtime calculator</h1>\n            {/*TODO check if IE does not show text null */}\n            <p>{progress}</p>\n          </Col>\n        </Row>\n        {config.networks && (\n          <Route render={props => <Calculator {...props} config={config} />} />\n        )}\n        <GithubCorner href=\"https://github.com/avbentem/lorawan-airtime-ui\" />\n      </Container>\n    </Router>\n  );\n}\n"],"sourceRoot":""}