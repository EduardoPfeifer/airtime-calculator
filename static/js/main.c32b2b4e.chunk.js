(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,a,t){},244:function(e,a,t){},247:function(e,a,t){},248:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(13),o=t.n(l),c=t(47),i=t.n(c),u=t(76),s=t(10),m=t(77),d=t.n(m),f=t(12),v=t.n(f),E=t(93),p=t.n(E),g=t(21),h=t.n(g),b=t(78),z=t.n(b),y=t(90),w=t(22),j=(t(124),t(30)),R=t.n(j),C=t(89),S=t.n(C),O=t(34),k=t.n(O),x=t(82),N=t.n(x),A=t(83),L=t.n(A),F=t(16),W=t.n(F),M=[{name:"LinkCheckReq",size:0},{name:"LinkAdrAns",size:1},{name:"DutyCycleAns",size:0},{name:"RXParamSetupAns",size:1},{name:"DevStatusAns",size:2},{name:"NewChannelAns",size:1},{name:"DlChannelAns",size:1},{name:"RXTimingSetupAns",size:0},{name:"TxParamSetupAns",size:0}],P=[{name:"LinkCheckAns",size:2},{name:"LinkAdrReq",size:4},{name:"DutyCycleReq",size:1},{name:"RXParamSetupReq",size:4},{name:"DevStatusReq",size:0},{name:"NewChannelReq",size:5},{name:"DlChannelReq",size:4},{name:"RXTimingSetupReq",size:1},{name:"TxParamSetupReq",size:1}],T=t(79),_=t.n(T),q=t(81),I=t.n(q);function D(e){var a=e.text,t=e.placement,n=void 0===t?"bottom":t;return a?r.a.createElement("sup",null,r.a.createElement(_.a,{placement:n,overlay:r.a.createElement(I.a,{id:"dummy"},r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(k.a,{source:a})))},r.a.createElement("small",{className:"text-muted"},"\u24d8"))):null}function V(e){return{value:""+e.value,onChange:function(a){var t=a.currentTarget;e.setValue("number"===typeof e.value?+t.value:t.value)}}}var B=t(46),H=t.n(B),U=t(35),X=t.n(U);function G(e){var a=e.min,t=void 0===a?0:a,l=e.value,o=e.setValue;return Object(n.useEffect)(function(){o(l)},[l]),r.a.createElement(X.a,{className:"mb-3"},r.a.createElement(X.a.Prepend,null,r.a.createElement(R.a,{onClick:function(){l>t&&o(l-1)},variant:"outline-secondary"},"-")),r.a.createElement(H.a,Object.assign({},V({value:l,setValue:o}),{type:"number",min:t,placeholder:"Enter number","aria-label":"Number"})),r.a.createElement(X.a.Append,null,r.a.createElement(R.a,{onClick:function(){o(function(e){return e+1})},variant:"outline-secondary"},"+")))}var $=t(95),J=t(96),K={payloadSize:6,headerSize:13,codingRate:"4/5"};function Q(e){function a(e){var a=Object(n.useState)(e),t=Object(s.a)(a,2);return{value:t[0],setValue:t[1]}}var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a={},t=e.split(",").map(function(e){return e.trim()}),n=!0,r=!1,l=void 0;try{for(var o,c=function(){var e=o.value;if(""===e)return"continue";if(/^\d+$/.test(e))return a.payloadSize?a.headerSize?console.warn("Ignored numeric value ".concat(e,"; already parsed both payloadSize and headerSize")):a.headerSize=+e:a.payloadSize=+e,"continue";if(/^cr4[5678]$/i.test(e))return a.codingRate?console.warn("Ignored string value ".concat(e,"; already parsed codingRate")):a.codingRate=e.substr(2).split("").join("/"),"continue";var t=e.toLowerCase(),n=M.concat(P).find(function(e){return e.name.toLowerCase()===t});n?a.macCommands=(a.macCommands||[]).concat(n):console.warn("Ignored string value ".concat(e,"; no matching MAC command found"))},i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)c()}catch(u){r=!0,l=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw l}}return Object(J.a)({},K,a)}(e.userConfig),l=a(t.payloadSize),o=a(t.headerSize),c=a(t.codingRate),i=a(t.macCommands);function u(e){var a;i.setValue((i.value||[]).concat(e)),a=e.size+1,o.setValue(function(e){return e+a})}Object(n.useEffect)(function(){e.setPacketSize(o.value+l.value)},[o,l]),Object(n.useEffect)(function(){e.setCodingRate(c.value)},[c]),Object(n.useEffect)(function(){e.setUserConfig(function(e,a,t,n){var r=[];return e===K.payloadSize&&a===K.headerSize||r.push(e),a!==K.headerSize&&r.push(a),t&&t!==K.codingRate&&r.push("cr"+t.replace("/","")),n&&r.push.apply(r,Object($.a)(n.map(function(e){return e.name}))),r.join(",")}(l.value,o.value,c.value,i.value))},[o,l,c]);var m=M.map(function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(N.a,{onClick:function(){return u(e)},pill:!0,variant:t.macCommands&&t.macCommands.includes(e)?"primary":"secondary"},e.name," ",e.size),"\xa0")});return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,null,r.a.createElement(W.a.Row,null,r.a.createElement(W.a.Group,{as:v.a,controlId:"formHeaderSize"},r.a.createElement(W.a.Label,null,"Header size",r.a.createElement(D,{text:"In a LoRaWAN 1.0.x uplink and downlink, the header is at least 13 bytes:\n\n- MType (1 byte)\n- DevAddr (4)\n- FCtrl (1)\n- FCnt (2)\n- FPort (1)\n- MIC (4)"})),r.a.createElement(G,Object.assign({},o,{min:13}))),r.a.createElement(W.a.Group,{as:v.a,controlId:"formApplicationPayloadSize"},r.a.createElement(W.a.Label,null,"Payload size",r.a.createElement(D,{text:"The application payload size. Might be empty for a simple ACK or if the packet only includes MAC commands."})),r.a.createElement(G,l)),r.a.createElement(W.a.Group,{as:v.a,controlId:"formCodingRate"},r.a.createElement(W.a.Label,null,"Coding rate",r.a.createElement(D,{text:"The coding rate (CR) used for forward error correction (FEC)."})),r.a.createElement(W.a.Control,Object.assign({as:"select"},V(c),{className:"xxtext-primary xxborder-primary"}),r.a.createElement("option",{value:"4/5"},"4/5"),r.a.createElement("option",{value:"4/6"},"4/6"),r.a.createElement("option",{value:"4/7"},"4/7"),r.a.createElement("option",{value:"4/8"},"4/8")))),t.macCommands&&r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a.Row,{className:"justify-content-md-center"},r.a.createElement(v.a,{md:"8"},r.a.createElement(W.a.Label,null,"MAC command"),r.a.createElement(L.a,{"aria-label":"MAC commands"},m))),r.a.createElement("br",null))))}var Y=t(86),Z=t.n(Y),ee=t(84),ae=t(85),te=function(){function e(){Object(ee.a)(this,e)}return Object(ae.a)(e,null,[{key:"calculate",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:125,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"4/5",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto",l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:8,c=Math.pow(2,a)/(1e3*t)*1e3,i=(o+4.25)*c,u=l?0:1,s="auto"===r&&125===+t&&+a>=11||!0===r?1:0,m=+n[2]-4;return+(i+(8+Math.max(Math.ceil((8*e-4*a+28+16-20*u)/(4*(a-2*s)))*(m+4),0))*c).toFixed(2)}}]),e}(),ne=t(23),re=t.n(ne);function le(e){var a=e.dr,t=e.airtime;return r.a.createElement(re.a,null,r.a.createElement(re.a.Header,null,r.a.createElement(re.a.Title,null,a.name,r.a.createElement(D,{text:a.notes,placement:"top"})),r.a.createElement(re.a.Subtitle,{as:"h4"},r.a.createElement("span",{className:"sf"},"SF"+a.sf),r.a.createElement("span",{className:"bw"},"BW",r.a.createElement("br",null),a.bw))),r.a.createElement(re.a.Title,{as:"h4"},t,r.a.createElement("span",{className:"Result-unit"},"ms")),r.a.createElement(re.a.Footer,null,r.a.createElement("div",null,Math.floor(3e4/t),r.a.createElement("span",{className:"Result-unit"},"/24h")),r.a.createElement("div",null,(1250/t).toFixed(1),r.a.createElement("span",{className:"Result-unit"},"avg",r.a.createElement("br",null),"/hour"))))}function oe(e){var a=e.region,t=e.packetSize,n=e.codingRate;if(!n)return null;var l=a.dataRates.map(function(e){var a=te.calculate(t,e.sf,e.bw,n);return r.a.createElement("td",{key:e.name},r.a.createElement(le,{dr:e,airtime:a}))});return r.a.createElement(Z.a,null,r.a.createElement("tbody",null,r.a.createElement("tr",null,l)))}var ce=t(94);t(244);function ie(e){var a=e.children,t=Object(n.useRef)(null),l=Object(n.useState)(!1),o=Object(s.a)(l,2),c=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],f=m[1],v=Object(n.useState)(""),E=Object(s.a)(v,2),p=E[0],g=(E[1],Object(n.useState)("")),h=Object(s.a)(g,2),b=h[0],z=(h[1],Object(n.useState)({width:-1,height:-1})),y=Object(s.a)(z,2),w=y[0],j=y[1];return Object(n.useEffect)(function(){var e=t.current;console.log("scroll",e);var a=function(){if(e){console.log(e),console.log(e.offsetWidth,e.scrollWidth,e.scrollLeft,e.scrollWidth-e.offsetWidth);var a=e.scrollLeft>0,t=e.scrollWidth-e.offsetWidth>e.scrollLeft+1;console.log("<< hasOverflowLeft",a),console.log("hasOverflowRight >>",t),i(a),f(t)}else console.log("No scroll element")};if(e)return a(),console.log("Registering onScroll"),window.addEventListener("resize",a),e.addEventListener("scroll",a),function(){console.log("Removing onScroll"),e.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[w]),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center horizontal-scroll "+(c?" horizontal-scroll--overflow-left":"")+(d?" horizontal-scroll--overflow-right":"")},r.a.createElement("div",{className:"horizontal-scroll__button "+(c?" horizontal-scroll__button--enabled":""),onClick:function(){var e=t.current;e&&e.scrollBy(-20,0)}},"\u2039"),r.a.createElement("div",{className:"horizontal-scroll__content table-responsive "+p+b,ref:t},a,r.a.createElement(ce.a,{handleWidth:!0,handleHeight:!0,onResize:function(e,a){console.log("resize"),j({width:e,height:a})}})),r.a.createElement("div",{className:"horizontal-scroll__button "+(d?" horizontal-scroll__button--enabled":""),onClick:function(){var e=t.current;e&&e.scrollBy(20,0)}},"\u203a"))}function ue(e,a,t){var n=a.pathname.split("/"),r=Object(s.a)(n,4),l=r[1],o=r[2],c=r[3],i=t.networks.find(function(e){return e.name===l}),u=i?i.regions.find(function(e){return e.name===o}):void 0;return{network:i,region:u,parameters:c}}function se(e){var a=function(e,a,t,n,r,l){var o=ue(0,a,t),c=void 0===l?o.parameters:l,i="/"+n.name+"/"+r.name+(c?"/"+c:"");a.pathname!==i?e.replace(i):console.log("No URL change needed; ".concat(i))}.bind(null,e.history,e.location,e.config),t=ue(e.history,e.location,e.config),l=t.network,o=t.region,c=t.parameters;if(!l){var i=e.config.networks[0],u=i.regions.find(function(e){return e.name===i.defaultRegion});return a(i,u),null}if(!o){var m=l.regions.find(function(e){return e.name===l.defaultRegion});return a(l,m),null}var d=Object(n.useState)(null),f=Object(s.a)(d,2),E=f[0],p=f[1],g=Object(n.useState)(null),b=Object(s.a)(g,2),z=b[0],y=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"xxxtable-responsive"},r.a.createElement(v.a,null,r.a.createElement(ie,null,r.a.createElement(S.a,null,l.regions.map(function(e){return r.a.createElement(R.a,{variant:"outline-primary",size:"sm",active:e.name===o.name,disabled:!e.dataRates,key:e.name,onClick:function(){return t=e,console.log("region",t),void a(l,t);var t}},e.label)}))))),r.a.createElement(h.a,null,r.a.createElement("hr",null)),r.a.createElement(h.a,{className:"justify-content-md-center"},r.a.createElement(v.a,{md:"auto"},r.a.createElement(Q,{userConfig:c,setUserConfig:function(e){console.log("URL",e),a(l,o,e)},setPacketSize:function(e){console.log("packet size",E,e),p(e)},setCodingRate:function(e){console.log("coding rate",z,e),y(e)}}))),r.a.createElement(h.a,{className:"justify-content-md-center"},r.a.createElement(v.a,{lg:"8"},r.a.createElement("h2",null,l.title," ",o.label))),r.a.createElement(h.a,null,r.a.createElement(v.a,{className:"xxtable-responsive"},r.a.createElement(ie,null,r.a.createElement(oe,{region:o,packetSize:E,codingRate:z})))),o.description&&r.a.createElement(h.a,{className:"justify-content-md-center"},r.a.createElement(v.a,{lg:"8"},r.a.createElement(k.a,{source:o.description}))))}t(247),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(function(){var e="/lorawan-airtime-ui/config.json",a=Object(n.useState)("Loading configuration..."),t=Object(s.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)({}),m=Object(s.a)(c,2),f=m[0],E=m[1];return Object(n.useEffect)(function(){var a=!1;return function(){var t=Object(u.a)(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get(e);case 3:n=t.sent.data,a||(o(null),E(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o("Failed to load configuration ".concat("/lorawan-airtime-ui"," ").concat(e,": ").concat(t.t0));case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}()(),function(){a=!0}},[]),r.a.createElement(y.a,{basename:"/lorawan-airtime-ui"},r.a.createElement(p.a,{className:"App"},r.a.createElement(h.a,null,r.a.createElement(v.a,null,r.a.createElement("h1",null,"LoRaWAN 1.0.x airtime calculator"),r.a.createElement("p",null,l))),f.networks&&r.a.createElement(w.a,{render:function(e){return r.a.createElement(se,Object.assign({},e,{config:f}))}}),r.a.createElement(z.a,{href:"https://github.com/avbentem/lorawan-airtime-ui"})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,a,t){e.exports=t(248)}},[[98,1,2]]]);
//# sourceMappingURL=main.c32b2b4e.chunk.js.map